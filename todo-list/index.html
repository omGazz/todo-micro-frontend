<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDo-List</title>
  </head>
  <body>
    <div id="task-list-container"></div>
  </body>
</html>

<script>
  let taskList = [
    {
      title: "demo",
      description: "create a demo app for micro-frontend",
      done: false,
    },
    {
      title: "article",
      description: "write article and publish it on Medium",
      done: false,
    },
    {
      title: "workout",
      description: "10:00 AM", 
      done: false,
    },
    {
      title: "meditation",
      description: "Lorem ipsum dolor metus",
      done: false,
    },
  ];

  const taskListContainerEl = document.getElementById("task-list-container");
  taskList.forEach((task) => {
    taskListContainerEl.innerHTML += `<li id="${task.title}" class="task">${task.title}</li>`;
  });

  document.querySelectorAll(".task").forEach((task) => {
    task.addEventListener("click", function (ev) {
      sendMessageToTodoSelected(ev.target.innerText);
    });
  });

  function sendMessageToTodoSelected(selectedTask) {
    const message = {
      type: "selectedTask",
      task: selectedTask,
    };
    parent.postMessage(message, "*");
  }
</script>
